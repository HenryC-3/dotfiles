# checkout yabai commands https://github.com/koekeishiya/yabai/wiki/Commands#message-passing-interface


# karabin keymap
# | key           | map to         |
# | ------------- | -------------- |
# | caps_lock     | ctrl+alt+cmd   |
# | right_control | ctrl+shift+cmd |
# | right_shift   | shift+alt+cmd  |
# | right_alt     | ctrl+shift+alt |

# ====================================================
# üåü app
# üëÄ move focus between apps
ctrl + alt + cmd - h : yabai -m window --focus first
# üîÅ cycle focus between apps in clockwise
ctrl + alt + cmd - j : yabai -m window --focus prev || yabai -m window --focus last
# üîÑ cycle focus between apps in counter clockwise
ctrl + alt + cmd - k : yabai -m window --focus next || yabai -m window --focus first
ctrl + alt + cmd - l : yabai -m window --focus last 

# layout
# üîÅ rotate layout clockwise
ctrl + alt + cmd - r : yabai -m space --rotate 270
# toggle focused app fullscreen
ctrl + alt + cmd - f : yabai -m window --toggle zoom-fullscreen
# toggle apps gap
ctrl + alt + cmd - g : yabai -m space --toggle padding; yabai -m space --toggle gap

# toggle center
# ctrl + alt + cmd - c : yabai -m window --toggle float;\
#           yabai -m window --grid 4:4:1:1:2:2

# toggle always float center https://github.com/koekeishiya/yabai/discussions/809#discussioncomment-326339
ctrl + alt + cmd - c : app=$(yabai -m query --windows --window mouse | jq -r '.app' | tr ' ' '_');\
         yabai -m window --toggle float;\
         yabai -m window --grid 6:6:1:1:4:4;\
         yabai -m signal --remove autofloat_$app || yabai -m signal --add event=window_created app=$app label=autofloat_$app action="yabai -m window $YABAI_WINDOW_ID --toggle float"

# toggole horizontal/vertical split
ctrl + alt + cmd - x : yabai -m window --toggle split


# resize 1/10 screen size pre-operation based on 1920 x 1080 resolution laptop
# #Ô∏è‚É£ resize evenly
ctrl + alt + cmd - m : yabai -m space --balance
# ‚û°Ô∏è resize focused app windown size from right, if can't, do left
ctrl + alt + cmd - a : yabai -m window --resize right:-192:0 || yabai -m window --resize left:192:0 
ctrl + alt + cmd - d : yabai -m window --resize right:192:0 || yabai -m window --resize left:-192:0
# ‚¨ÜÔ∏è resize focused app windown height from top, if can't, do bottom
ctrl + alt + cmd - w : yabai -m window --resize top:0:-108 || yabai -m window --resize bottom:0:108
ctrl + alt + cmd - s : yabai -m window --resize top:0:108 || yabai -m window --resize bottom:0:-108

# swap
ctrl + alt + cmd - up : yabai -m window --swap north
ctrl + alt + cmd - down : yabai -m window --swap south
ctrl + alt + cmd - left : yabai -m window --swap west
ctrl + alt + cmd - right : yabai -m window --swap east

# ====================================================
# üåü space (virtual desktop)

# Focus next space
ctrl + alt + cmd - e : yabai -m space --focus next || yabai -m space --focus first # if none then focus fisrt one
# Focus previous space
ctrl + alt + cmd - q : yabai -m space --focus prev || yabai -m space --focus last # if none then focus last one

# Focus a space, if target spcace not available then create one
ctrl + alt + cmd - 1 : yabai -m space --focus 1 || yabai -m space --create
ctrl + alt + cmd - 2 : yabai -m space --focus 2 || yabai -m space --create
ctrl + alt + cmd - 3 : yabai -m space --focus 3 || yabai -m space --create
ctrl + alt + cmd - 4 : yabai -m space --focus 4 || yabai -m space --create

# move app to a space, if target spcace not available then create one
ctrl + alt + cmd - 7 : yabai -m window --space 1 || yabai -m space --create; yabai -m window --space 1
ctrl + alt + cmd - 8 : yabai -m window --space 2 || yabai -m space --create; yabai -m window --space 2
ctrl + alt + cmd - 9 : yabai -m window --space 3 || yabai -m space --create; yabai -m window --space 3
ctrl + alt + cmd - 0 : yabai -m window --space 4 || yabai -m space --create; yabai -m window --space 4


# ====================================================
# üåü stackline https://github.com/AdamWagner/stackline/wiki/Install-&-configure-dependencies
# Focus window up/down in stack
ctrl + alt + cmd - o : yabai -m window --focus stack.next
ctrl + alt + cmd - p : yabai -m window --focus stack.prev

# Add the active window  to the window or stack to the {direction}
# Note that this only works when the active window does *not* already belong to a stack
ctrl + alt + cmd - left  : yabai -m window west --stack $(yabai -m query --windows --window | jq -r '.id')
ctrl + alt + cmd - down  : yabai -m window south --stack $(yabai -m query --windows --window | jq -r '.id')
ctrl + alt + cmd - up    : yabai -m window north --stack $(yabai -m query --windows --window | jq -r '.id')
ctrl + alt + cmd - right : yabai -m window east --stack $(yabai -m query --windows --window | jq -r '.id')

# toggle layout between stack and bsp style

ctrl + alt + cmd - t : yabai -m space --layout $( [ "$(yabai -m query --spaces --space | jq -re .type)" = 'bsp' ] && echo 'stack' || echo 'bsp' )